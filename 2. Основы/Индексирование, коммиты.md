# 2.2 Git – Основы – Индексирование, коммиты

> [!IMPORTANT]
> В _Git_ изменения НЕ попадают из рабочего дерева в репозиторий напрямую.

> [!NOTE]
> Вместо этого изменения сначала регистрируются в ***индексе*** (*индексация*).  
> Это можно рассматривать как способ *«подтверждения»* ваших изменений перед совершением *коммита*.

![Иллюстрация жизненного цикла изменений проекта](https://habrastorage.org/webt/tc/hz/vd/tchzvdfzhvhht5akhcdf93fnhso.png)


Изменения могут быть:
+ В *рабочем дереве*  
  &ensp; (не синхронизированы файлы в *рабочем дереве* и *индекс*) ;
+ В *индексе*  
  &ensp; (не синхронизированы *индекс* и *HEAD-коммит*) ;

## Просмотр изменений

  ```powershell
  ~~~> git
           status
  ```

<details> <summary>Вывод:</summary>

  ```powershell
  On branch master
  Changes to be committed:
    (use "git restore --staged <file>..." to unstage)
          new file:   file3
          new file:   file5
  
  Changes not staged for commit:
    (use "git add <file>..." to update what will be committed)
    (use "git restore <file>..." to discard changes in working directory)
          modified:   file2
          modified:   file5
  
  Untracked files:
    (use "git add <file>..." to include in what will be committed)
          file4
  ```
</details>

Отображаемая информация:
+ Текущая _ветка_ ;
+ ***Changes to be committed*** - файлы в *рабочем дереве* не синхронизированые с репозиторием,  
 но синхронизированые с *индексом* (т.е. подготовленные для следующего коммита) ;
+ ***Changes not staged for commit*** - файлы в *рабочем дереве* либо не синхронизированые с репозиторием,  
 либо не синхронизированые с *индексом* ;
+ ***Untracked files*** - файлы в *рабочем дереве*, о которых не знает ни _репозиторий_, ни _индекс_;

## Индексирование

  ```powershell
  ~~~> git
           add [имя_файла | директория | регулярка]
  ```

## Создание коммита

  ```powershell
  ~~~> git
           commit
  ```

  Вывод (оформление коммита):
  
  ```powershell
  <type>[<scope>]: <subject>
  
  <body>
  
  <footer>
  # Please enter the commit message for your changes. Lines starting
  # with '#' will be ignored, and an empty message aborts the commit.
  #
  # On branch master
  # Changes to be committed:
  #       modified:   file5
  #
  # Untracked files:
  #       file4
  #
  ```

> [!NOTE]  
> Редактор для ввода информации о коммите можно поменять.  
>  Для этого необходимо сконфигурировать параметр `core.editor`
>  ```powershell
>  ~~~> whereis vim
>  vim: /usr/bin/vim /etc/vim /usr/share/vim /usr/share/man/man1/vim.1.gz
>  ```
>  ```powershell
>  ~~~> git config --global core.editor /usr/bin/vim
>  ```
  
